var ilib=require("./ilib.js"),path=require("./Path.js"),Loader=require("./Loader.js"),QMLLoader=function(fr){this.fr=fr,this.parent.call(this,ilib),this.root=module.filename?path.dirname(path.join(module.filename,"..")):Qt.resolvedUrl("..").toString(),this.root=this.root.replace("file://",""),"/"===this.root[this.root.length-1]&&(this.root=this.root.substring(0,this.root.length-1)),this.includePath.push(path.join(this.root,"resources")),this._exists(path.join(this.root,"locale"),"localeinfo.json"),this._exists("/usr/share/javascript/ilib/locale","localeinfo.json")};QMLLoader.prototype=new Loader(),QMLLoader.prototype.parent=Loader,(QMLLoader.prototype.constructor=QMLLoader).prototype._loadFile=function(pathname,sync,cb){if(this.fr.exists(pathname))return pathname=this.fr.read(pathname),cb&&"function"==typeof cb&&cb(pathname),pathname;cb&&"function"==typeof cb&&cb()},QMLLoader.prototype._exists=function(dir,file){file=path.normalize(path.join(dir,file));this.fr.exists(file)&&this.includePath.push(dir)},module.exports=QMLLoader;